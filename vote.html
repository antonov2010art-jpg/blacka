<div id="auth">
  <button class="btn" id="googleLogin">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
</div>

<!DOCTYPE html>
<html lang="ru">
<head> 
  
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<meta charset="UTF-8">
  
<title>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Äî BLACK AWARDS</title>

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="vote-container">

  <h2>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</h2>

  <form id="voteForm">

    <h3>BLACK KING –≥–æ–¥–∞</h3>
    <div class="options">
      <button type="button">–ë–µ–±—Ä</button>
      <button type="button">–ê—Ä—Ç–µ–º</button>
      <button type="button">–•–∏–Ω–∫–æ</button>
      <button type="button">–î–∏–ø—Ç–∏</button>
    </div>

    <h3>–¢–æ–∫—Å–∏–∫ –≥–æ–¥–∞</h3>
    <div class="options">
      <button type="button">–õ–¥–µ—à–∫–∞</button>
      <button type="button">–•–∏–Ω–∫–æ</button>
      <button type="button">–ê—Ä—Ç–µ–º</button>
      <button type="button">–ì–µ–Ω–∏—É—Å</button>
    </div>

    <h3>–ò–≤–∞–Ω –ó–æ–ª–æ –≥–æ–¥–∞</h3>
    <div class="options">
      <button type="button">–°–≤–æ–º–ø–∏</button>
      <button type="button">–ü–µ—Ç—è</button>
      <button type="button">–†–∞—É—Ç</button>
      <button type="button">–õ–µ—Ö–∞</button>
    </div>
    <h3>–ó–∞–≤–æ–∑ –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–ö–∏–Ω—É–ª –¥–µ–∫–æ–π –ø–æ–¥ —Ç–∏–ø–∞ (–†–∞—É—Ç)</button>
  <button type="button">¬´–ê—Ä—Ç–µ–º–∫–∞¬ª –∏ —à–ª—è–ø–∫–∞ (–ö—É—Ä—Ä–µ–Ω—Ç)</button>
  <button type="button">–ü—Ä–∏–≤–µ—Ç—ã —Ö—É–¥—à–µ–º—É –∏–≥—Ä–æ–∫—É (–õ–¥–µ—à–∫–∞)</button>
  <button type="button">2 –≥–æ–ª–æ–≤—ã –≤–∞–Ω—à–æ—Ç–æ–º (–õ–µ—Ö–∞)</button>
</div>

<h3>–ß–µ–ª–æ–≤–µ–∫-–º–µ–º –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–•—É–¥—à–∏–π –∏–≥—Ä–æ–∫ (–ì–µ–Ω–∏—É—Å)</button>
  <button type="button">–†–∞—É—Ç</button>
  <button type="button">–ë–µ–±—Ä</button>
  <button type="button">–õ–¥–µ—à–∫–∞</button>
  <button type="button">–õ–µ—Ö–∞</button>
  <button type="button">–ü–µ—Ç—è</button>
  <button type="button">–ê—Ä—Ç–µ–º</button>
</div>

<h3>–ü—Ä–æ–µ–∫—Ç –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–¢—É—Ä–Ω–∏—Ä 2x2 (–•–∏–Ω–∫–æ)</button>
  <button type="button">–ë–µ–±—Ä ‚Äî —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ</button>
  <button type="button">–í—ã–∂–∏–≤–∞–Ω–∏–µ —Å –º–æ–¥–∞–º–∏ (–ë–µ–±—Ä)</button>
  <button type="button">BLACK AWARDS (–•–∏–Ω–∫–æ)</button>
</div>

<h3>–§–µ–π–ª –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–õ–¥–µ—à–∫–∞ ‚Äî —Ñ–µ–π–∫ –∞–¥–º–∏–Ω x2</button>
  <button type="button">7 —É—Ç—Ä–∞ –≤–∞–ª—è–µ–º—Å—è‚Ä¶</button>
  <button type="button">–°–≤–æ–º–ø–∏ –º—Å—Ç–∏—Ç –∑–∞ –ë–µ–±—Ä–∞</button>
  <button type="button">–ë–∞–±—É—à–∫–∞ –ø–æ–∑–≤–æ–Ω–∏–ª–∞ –Ω–æ—á—å—é (–î–∏–ø—Ç–∏)</button>
</div>

<h3>AFK –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–ö—É—Ä—Ä–µ–Ω—Ç</button>
  <button type="button">–ú–∞–¥–∞—Ä–∞</button>
  <button type="button">–ì–µ–Ω–∏—É—Å</button>
  <button type="button">–î–µ–π–∑–∏</button>
</div>

<h3>–•–∞—Ä–∏–∑–º–∞ –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–•–∏–Ω–∫–æ</button>
  <button type="button">–ê—Ä—Ç–µ–º</button>
  <button type="button">–õ–¥–µ—à–∫–∞</button>
  <button type="button">–ë–µ–±—Ä</button>
  <button type="button">–ê—Ä—Ç–µ–º –û—Ä–∫–∏–Ω–≤–∞–π–¥–µ—Ä –ú–∞–∫—Ç—Ä–∞—Ö–µ—Ä</button>
</div>

<h3>–•—É–¥—à–∏–π –∏–≥—Ä–æ–∫ –≥–æ–¥–∞</h3>
<div class="options">
  <button type="button">–ê—Ä—Ç–µ–º</button>
  <button type="button">–ú–∞–ø–ª–µ</button>
  <button type="button">–ú—ç–ø–ª–µ</button>
  <button type="button">–ì–µ–Ω–∏—É—Å</button>
</div>

 <button type="submit" class="btn submit-btn" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å</button>
<p id="vote-warning">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –≤ –∫–∞–∂–¥–æ–π –Ω–æ–º–∏–Ω–∞—Ü–∏–∏</p>

  </form>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

  const optionGroups = document.querySelectorAll('.options');
  const submitBtn = document.querySelector('.submit-btn');
  const warning = document.getElementById('vote-warning');

  function checkAllSelected() {
    let allSelected = true;

    optionGroups.forEach(group => {
      if (!group.querySelector('.selected')) {
        allSelected = false;
      }
    });

    submitBtn.disabled = !allSelected;
    warning.style.opacity = allSelected ? '0' : '1';
  }

  optionGroups.forEach(group => {
    group.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        group.querySelectorAll('button')
          .forEach(b => b.classList.remove('selected'));

        btn.classList.add('selected');
        checkAllSelected();
      });
    });
  });

  document.getElementById('voteForm').addEventListener('submit', e => {
    e.preventDefault();
    alert('–ì–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç! üèÜ');
  });

});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {

  const firebaseConfig = {
    apiKey: "AIzaSyAZiHeDrbP0bXx9ZsDWqGZFw_Ljh_nhBqc",
  authDomain: "black-awards.firebaseapp.com",
  projectId: "black-awards",
  storageBucket: "black-awards.firebasestorage.app",
  messagingSenderId: "1028165098992",
  appId: "1:1028165098992:web:506d988e4d97fdb062d135",
  measurementId: "G-JHFC5J81E7"
  };

  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.firestore();
  const provider = new firebase.auth.GoogleAuthProvider();

  const loginBtn = document.getElementById('googleLogin');
  const authBlock = document.getElementById('auth');
  const voteForm = document.getElementById('voteForm');

  voteForm.style.display = 'none';

  loginBtn.addEventListener('click', () => {
    auth.signInWithPopup(provider).catch(err => {
      alert(err.message);
      console.error(err);
    });
  });

  auth.onAuthStateChanged(async user => {
    if (!user) return;

    authBlock.style.display = 'none';
    voteForm.style.display = 'block';

    const userRef = db.collection('users').doc(user.uid);
    const doc = await userRef.get();

    if (doc.exists && doc.data().voted) {
      alert('–¢—ã —É–∂–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª');
      voteForm.style.display = 'none';
    }
  });

  voteForm.addEventListener('submit', async e => {
    e.preventDefault();

    const user = auth.currentUser;
    if (!user) return;

    const vote = {};
    document.querySelectorAll('.options').forEach(group => {
      vote[group.previousElementSibling.innerText] =
        group.querySelector('.selected').innerText;
    });

    await db.collection('votes').add({
      userId: user.uid,
      answers: vote,
      createdAt: Date.now()
    });

    await db.collection('users').doc(user.uid).set({
      email: user.email,
      voted: true
    });

    alert('–ì–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç! üèÜ');
    location.reload();
  });

});
</script>

</body>
</html>