<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>BLACK AWARDS — Админ</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<button onclick="login()">Войти через Google</button>
<div id="results"></div>

<script>
  const firebaseConfig = {
    /* ТОТ ЖЕ CONFIG */
  };

  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.firestore();
  const provider = new firebase.auth.GoogleAuthProvider();

  function login() {
    auth.signInWithPopup(provider);
  }

  auth.onAuthStateChanged(async user => {
    if (!user) return;

    const votes = await db.collection('votes').get();
    const results = {};

    votes.forEach(doc => {
      const answers = doc.data().answers;
      for (const cat in answers) {
        if (!results[cat]) results[cat] = {};
        results[cat][answers[cat]] = (results[cat][answers[cat]] || 0) + 1;
      }
    });

    const div = document.getElementById('results');
    for (const cat in results) {
      div.innerHTML += <h3>${cat}</h3>;
      for (const name in results[cat]) {
        div.innerHTML += <p>${name} — ${results[cat][name]}</p>;
      }
    }
  });
</script>

</body>
</html>